const t={timeLimit:8,mission:10,items:{carrot:{imgPath:"./assets/img/carrot.png"},bug:{imgPath:"./assets/img/bug.png"}},sounds:{bgm:new Audio("./assets/sound/bgm.mp3"),playBgm(){this.bgm.play()},pauseBgm(){this.bgm.pause()},initBgm(){this.bgm.currentTime=0,this.bgm.pause()},playCarrot(){new Audio("./assets/sound/carrot_pull.mp3").play()},playBug(){new Audio("./assets/sound/bug_pull.mp3").play()},playWin(){new Audio("./assets/sound/game_win.mp3").play()},playLose(){new Audio("./assets/sound/game_lose.mp3").play()}}};function i(t){return t.padStart(2,"0")}class s{constructor(){const t=document.getElementById("time-limit");if(!t)throw"최상위 요소가 존재하지 않습니다.";this.timeLimitContainer=t}update(t){this.timeLimitContainer.innerHTML=`00:${i(String(t))}`}render(t){this.timeLimitContainer.innerHTML=`00:${i(String(t))}`}clear(){this.timeLimitContainer.innerHTML="00:00"}}class e{static update(){throw new Error("Method not implemented.")}htmlList=[];constructor(){const t=document.getElementById("mission");if(!t)throw"최상위 요소가 존재하지 않습니다.";this.missionContainer=t}update(){this.htmlList.push("🥕"),this.render()}render(){this.missionContainer.innerHTML=this.htmlList.join("")}clear(){this.htmlList=[],this.render()}}class n{htmlList=[];constructor(){const t=document.getElementById("game-area");if(!t)throw"최상위 요소가 존재하지 않습니다.";this.gameAreaContainer=t}update(t){const i=t.getAttribute("id");this.htmlList=this.htmlList.filter((t=>{t.includes(`id='${i}'`)})),t.remove()}preRender(){(()=>{for(let i=1;i<=2*t.mission;i++)i<=t.mission?this.htmlList.push(`<img src=${t.items.carrot.imgPath} id='${i}' alt='carrot'>`):this.htmlList.push(`<img src=${t.items.bug.imgPath} id='${i}' alt='bug'>`)})(),this.gameAreaContainer.innerHTML=this.htmlList.join("")}render(i){this.preRender();const s=t=>{const i=(s=this.gameAreaContainer.clientWidth,e=this.gameAreaContainer.clientHeight,{left:Math.random()*(s-80),top:Math.random()*(e-80)});var s,e;t.setAttribute("style",`transform: translate(${Math.floor(i.left)}px, ${Math.floor(i.top)}px)`)},e=s=>{"bug"===s.getAttribute("alt")&&s.addEventListener("click",(()=>{t.sounds.playBug()})),"carrot"===s.getAttribute("alt")&&s.addEventListener("click",(s=>{t.sounds.playCarrot(),i.update(),this.update(s.target)}))};this.gameAreaContainer.querySelectorAll("img").forEach((t=>{e(t),s(t)}))}clear(){this.htmlList=[],this.gameAreaContainer.innerHTML=""}}class a{timeLimit=new s;mission=new e;gameArea=new n;clear(){this.timeLimit.clear(),this.mission.clear(),this.gameArea.clear()}render(t){this.timeLimit.render(t),this.mission.render(),this.gameArea.render(this.mission)}}const r=document.getElementById("backdrop-root"),o=document.getElementById("modal-root"),m=document.querySelector(".message");function l(t,i){if(m)switch(i){case"win":m.innerHTML="You Win 🥳";break;case"lose":m.innerHTML="You Lose 😭";break;default:m.innerHTML="다시 시작하시겠습니까?"}t?(r?.classList.add("on"),o?.classList.add("on")):(r?.classList.remove("on"),o?.classList.remove("on"))}class d{view=new a;states={isStarted:!1,isPlayed:!1,isModalOpen:!1,timeLimit:t.timeLimit,timer:void 0};constructor(t,i,s){this.playBtn=t,this.pauseBtn=i,this.againBtn=s}init(){this.states={isStarted:!1,isPlayed:!1,isModalOpen:!1,timeLimit:t.timeLimit,timer:void 0},this.view.clear(),t.sounds.initBgm()}play(){this.states.isStarted||(this.view.render(this.states.timeLimit),this.states.isStarted=!0),this.states.isPlayed=!0,t.sounds.playBgm(),this.playBtn.classList.remove("on"),this.pauseBtn.classList.add("on"),this.startTimer()}startTimer(){this.states.timer=setInterval((()=>this.view.mission.htmlList.length===t.mission?(this.stopTimer(),void this.finish("win")):0===this.states.timeLimit?(this.stopTimer(),void this.finish("lose")):(this.states.timeLimit--,void this.view.timeLimit.update(this.states.timeLimit))),1e3)}stopTimer(){clearInterval(this.states.timer)}pause(i){this.states.isPlayed=!1,t.sounds.pauseBgm(),this.stopTimer(),this.playBtn.classList.add("on"),this.pauseBtn.classList.remove("on"),this.states.isModalOpen=!0,l(this.states.isModalOpen,i)}finish(i){switch(this.pause(i),i){case"win":t.sounds.playWin();break;case"lose":t.sounds.playLose()}this.init()}again(){this.init(),l(this.states.isModalOpen),this.play()}closeModal(){this.states.isModalOpen=!1,l(this.states.isModalOpen)}}const h=document.getElementById("play"),c=document.getElementById("pause"),u=document.getElementById("again"),p=document.getElementById("close");if(h&&c&&u&&p){const t=new d(h,c,u);h.addEventListener("click",t.play.bind(t)),c.addEventListener("click",t.pause.bind(t)),u.addEventListener("click",t.again.bind(t)),p.addEventListener("click",t.closeModal.bind(t))}